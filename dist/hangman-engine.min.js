/**
 * hangman-engine v0.1.1 (https://github.com/tameraydin/hangman-engine)
 * Copyright 2015 Tamer Aydin (http://tamerayd.in)
 * Licensed under MIT
 */
(function(){"use strict";function t(t){return JSON.parse(JSON.stringify(t))}var s=["PENDING","STARTED","QUIT","WON","LOST"],i={maxAttempt:10,concealCharacter:"*"},e=function(t,i){var e=[],n={};t&&"string"==typeof t&&t.trim().split("").forEach(function(t,s){n[t]?n[t].push(s):n[t]=[s]," "!==t&&-1===e.indexOf(t)&&e.push(t)}),this.status=s[0],this.characterMap=n,this.characters=e,this.guesses=[],this.hits=[],this.misses=[],this.config=i,this.listeners={start:null,guess:null,end:null}};e.prototype={on:function(t,s){return this.listeners.hasOwnProperty(t)&&"function"==typeof s&&(this.listeners[t]=s),this},start:function(t){return(t||this.status===s[0])&&(t&&(this.guesses=[],this.hits=[],this.misses=[]),this.status=s[1],this.listeners.start&&this.listeners.start.call(this)),this},guess:function(t,i){if(this.status===s[1]&&"string"==typeof t){var e;t=t[0].trim(),t&&(this.characters.indexOf(t)>-1?e=this.hits.push(t):this.misses.push(t),this.guesses.push(t),this.listeners.guess&&this.listeners.guess.call(this,t,!!e,!!i),this.hits.length===this.characters.length?this.end(s[3]):this.guesses.length===this.config.maxAttempt&&this.end(s[4]))}return this},hint:function(){if(this.status===s[1]){var t;for(t=0;t<this.characters.length;t++){var i=this.characters[t];if(-1===this.hits.indexOf(i)){this.guess(i,!0);break}}}return this},end:function(t){if(s.indexOf(this.status)<2){if(t&&s.indexOf(t)<2)return this;this.status=t||s[2],this.listeners.end&&this.listeners.end.call(this)}return this},getConcealedPhrase:function(){function t(t){n[t]=" "!==s&&-1===e.indexOf(s)?i:s}var s,i=this.config.concealCharacter,e=this.hits,n=[];for(s in this.characterMap)this.characterMap[s].forEach(t);return n.join("")}};var n=function(){this.config=t(i)};n.prototype={configure:function(t){if(t){var s;for(s in t)this.config[s]&&(this.config[s]=t[s])}},reset:function(){this.config=t(i)},newGame:function(s){return new e(s,t(this.config))}};var h=new n,r=this;"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports?module.exports=h:"function"==typeof define&&define.amd?define("hangmanEngine",[],function(){return h}):r.hangmanEngine=h}).call(this);